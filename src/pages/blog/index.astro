---
import Base from "../../layouts/Base.astro";
import HeroUltra from "../../components/ui/HeroUltra.astro";
import BadgeUltra from "../../components/ui/BadgeUltra.astro";
import ButtonUltra from "../../components/ui/ButtonUltra.astro";
import BlogPostCard from "../../components/ui/BlogPostCard.astro";
import {
  BookOpen,
  Calendar,
  Clock,
  ArrowRight,
  TrendingUp,
  Home,
  Users,
  Award,
  CheckCircle,
  Building,
  Calculator,
  Search,
  Filter
} from 'lucide-react';
import { posts } from "../../data/posts.js";


// Statistiques du blog
const categoriesArray = [...new Set(posts.map(post => post.category))];
const stats = {
  totalArticles: posts.length,
  totalReadingTime: posts.reduce((total, post) => total + parseInt(post.readingTime), 0),
  categories: categoriesArray,
  categoriesCount: categoriesArray.length,
  featuredArticles: posts.filter(post => post.featured).length
};

const title = "Blog Immobilier | L'Agence de Voglans";
const description = "Conseils, analyses et tendances du marché immobilier de Voglans et de la Savoie.";
---

<style>
  /* Thème sombre/clair toggle */
  .theme-toggle {
    position: fixed;
    bottom: 2rem;
    left: 2rem;
    z-index: 40;
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .theme-toggle:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  }

  /* Mode sombre */
  .dark {
    background-color: #0f172a;
    color: #f1f5f9;
  }

  .dark .bg-white {
    background-color: #1e293b;
  }

  .dark .text-muted {
    color: #94a3b8;
  }

  .dark .border-primary\\/20 {
    border-color: rgba(16, 185, 129, 0.3);
  }

  /* Gradients sophistiqués */
  .gradient-mesh {
    background:
      radial-gradient(at 40% 20%, hsla(158, 65%, 40%, 0.3) 0px, transparent 50%),
      radial-gradient(at 80% 0%, hsla(158, 65%, 50%, 0.2) 0px, transparent 50%),
      radial-gradient(at 0% 50%, hsla(158, 65%, 30%, 0.25) 0px, transparent 50%),
      radial-gradient(at 80% 50%, hsla(158, 65%, 45%, 0.15) 0px, transparent 50%),
      radial-gradient(at 0% 100%, hsla(158, 65%, 35%, 0.2) 0px, transparent 50%),
      radial-gradient(at 80% 100%, hsla(158, 65%, 40%, 0.1) 0px, transparent 50%);
  }

  /* Effets de verre avancés */
  .glass-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .glass-card:hover {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(16, 185, 129, 0.3);
    box-shadow:
      0 12px 40px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* Animations de texte sophistiquées */
  .text-gradient-animate {
    background: linear-gradient(-45deg, #10b981, #059669, #047857, #065f46);
    background-size: 400% 400%;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    animation: gradientShift 8s ease infinite;
  }

  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Effets de survol avancés pour les cartes */
  .blog-card {
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .blog-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
    transition: left 0.6s ease;
  }

  .blog-card:hover::before {
    left: 100%;
  }

  .blog-card:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow:
      0 25px 50px rgba(16, 185, 129, 0.15),
      0 15px 35px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(16, 185, 129, 0.1);
  }

  /* Barre de progression de lecture */
  .reading-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: rgba(16, 185, 129, 0.2);
    z-index: 1000;
  }

  .reading-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #10b981, #059669);
    width: 0%;
    transition: width 0.3s ease;
  }

  /* Table des matières flottante */
  .floating-toc {
    position: fixed;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 16px;
    padding: 1.5rem;
    max-width: 250px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }

  .floating-toc.visible {
    opacity: 1;
    visibility: visible;
  }

  .toc-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid rgba(16, 185, 129, 0.1);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .toc-item:hover {
    color: #10b981;
    padding-left: 0.5rem;
  }

  .toc-item.active {
    color: #10b981;
    font-weight: 600;
  }

  /* Mode lecture immersif */
  .reading-mode {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #ffffff;
    z-index: 1000;
    padding: 2rem;
    overflow-y: auto;
    font-size: 1.125rem;
    line-height: 1.8;
  }

  .reading-mode.dark {
    background: #0f172a;
    color: #f1f5f9;
  }

  /* Boutons flottants d'action */
  .floating-actions {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    z-index: 30;
  }

  .floating-btn {
    width: 56px;
    height: 56px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(16, 185, 129, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .floating-btn:hover {
    transform: scale(1.05);
    background: rgba(16, 185, 129, 0.1);
    box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
  }
</style>

<Base title={title} description={description}>
  <!-- Hero Section Ultra-Moderne -->
  <HeroUltra>
    <!-- Menu hamburger mobile sophistiqué -->
    <div class="mobile-menu-toggle" id="mobile-menu-toggle">
      <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </div>

    <!-- Toggle thème sombre/clair -->
    <div class="theme-toggle" id="theme-toggle" title="Basculer le thème">
      <svg class="w-5 h-5 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg>
      <svg class="w-5 h-5 moon-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
      </svg>
    </div>

    <div slot="badge">
      <BadgeUltra text="Expertise & Conseils" />
    </div>

    <div slot="title">
      <h1 class="hero-title text-gradient-animate">Le Journal<br>
      <span class="font-semibold">de Voglans</span></h1>
    </div>

    <div slot="subtitle">
      <p class="hero-subtitle">Tendances du marché, conseils pratiques et retours d'expérience<br>
      pour vendre, acheter ou investir en Savoie.</p>
    </div>

    <div slot="cta">
      <ButtonUltra href="/contact" text="Nous contacter" />
    </div>
  </HeroUltra>

  <!-- Blog Posts Section Ultra-Moderne -->
  <section class="py-24 bg-white relative overflow-hidden">
    <!-- Fond décoratif subtil -->
    <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-primary/10"></div>
    <div class="absolute top-0 left-0 w-64 h-64 bg-gradient-radial from-primary/10 to-transparent rounded-full -translate-x-32 -translate-y-32"></div>
    <div class="absolute bottom-0 right-0 w-64 h-64 bg-gradient-radial from-primary/10 to-transparent rounded-full translate-x-32 translate-y-32"></div>

    <!-- Particules flottantes -->
    <div class="floating-particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-7xl mx-auto">
        <!-- Header avec glassmorphism -->
        <div class="text-center mb-20 animate-on-scroll" id="stats">
          <div class="inline-flex items-center gap-3 bg-white/80 backdrop-blur-xl border border-primary/20 text-primary px-6 py-3 rounded-full text-sm font-semibold shadow-xl shadow-primary/10 mb-8">
            <span class="w-2 h-2 bg-primary rounded-full animate-pulse"></span>
            Articles Récents
          </div>
          <h2 class="text-4xl md:text-5xl font-light mb-6 text-foreground">
            Actualités <span class="font-semibold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent">Immobilières</span>
          </h2>
          <p class="text-xl text-muted max-w-3xl mx-auto">
            Analyses du marché, conseils d'experts et tendances de l'immobilier en Savoie
          </p>

          <!-- Statistiques du blog -->
          <div class="stats-grid flex flex-wrap justify-center gap-8 mt-12 animate-on-scroll">
            <div class="text-center">
              <div class="stat-number text-3xl font-bold text-primary mb-1">{stats.totalArticles}</div>
              <div class="text-sm text-muted">Articles</div>
            </div>
            <div class="text-center">
              <div class="stat-number text-3xl font-bold text-primary mb-1">{stats.totalReadingTime} min</div>
              <div class="text-sm text-muted">Temps de lecture</div>
            </div>
            <div class="text-center">
              <div class="stat-number text-3xl font-bold text-primary mb-1">{stats.categoriesCount}</div>
              <div class="text-sm text-muted">Catégories</div>
            </div>
            <div class="text-center">
              <div class="stat-number text-3xl font-bold text-primary mb-1">{stats.featuredArticles}</div>
              <div class="text-sm text-muted">Articles en vedette</div>
            </div>
          </div>
        </div>

        <!-- Recherche et filtres avancés -->
        <div class="max-w-4xl mx-auto mb-12 animate-on-scroll" id="search">
          <div class="search-filters flex flex-col sm:flex-row gap-4 mb-6">
            <div class="relative flex-1">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted" />
              <input
                type="text"
                id="blog-search"
                placeholder="Rechercher dans les articles..."
                class="search-input w-full pl-10 pr-4 py-3 bg-white/80 backdrop-blur-sm border border-primary/20 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 touch-optimized"
              >
            </div>
            <select
              id="category-filter"
              class="category-select px-4 py-3 bg-white/80 backdrop-blur-sm border border-primary/20 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 touch-optimized"
            >
              <option value="all">Toutes les catégories</option>
              {stats.categories.map(category => (
                <option value={category.toLowerCase()}>{category}</option>
              ))}
            </select>
          </div>

          <!-- Tags populaires -->
          <div class="tags-container flex flex-wrap justify-center gap-2">
            {Array.from(new Set(posts.flatMap(post => post.tags))).slice(0, 8).map(tag => (
              <button class="tag-filter bg-primary/10 text-primary hover:bg-primary hover:text-white px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300 touch-optimized" data-tag={tag}>
                #{tag}
              </button>
            ))}
          </div>
        </div>

        <!-- Blog Posts Grid - Responsive amélioré -->
        <div id="blog-posts" class="blog-grid grid gap-6 sm:gap-8 grid-cols-1 md:grid-cols-2 max-w-6xl mx-auto">
          {posts.map((post, index) => (
            <div class={`animate-on-scroll ${index % 2 === 0 ? 'sm:mt-0' : 'sm:mt-8'}`}>
              <BlogPostCard
                title={post.title}
                description={post.description}
                href={post.href}
                date={post.date}
                readingTime={post.readingTime}
                category={post.category}
                featured={post.featured}
                image={post.image}
                tags={post.tags}
              />
            </div>
          ))}
        </div>

        <!-- Indicateur de scroll avec storytelling -->
        <div class="fixed bottom-8 right-8 z-50 hidden lg:block">
          <div class="scroll-indicator">
            <div class="scroll-progress"></div>
            <div class="scroll-text">↓ Scroll</div>
          </div>
        </div>

        <!-- Boutons d'action flottants -->
        <div class="floating-actions hidden lg:flex">
          <button class="floating-btn" id="reading-mode-btn" title="Mode lecture">
            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
            </svg>
          </button>
          <button class="floating-btn" id="share-btn" title="Partager">
            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
            </svg>
          </button>
          <button class="floating-btn" id="toc-btn" title="Table des matières">
            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>

        <!-- Table des matières flottante -->
        <div class="floating-toc" id="floating-toc">
          <h3 class="text-sm font-bold text-primary mb-3">Sommaire</h3>
          <div class="space-y-2">
            <div class="toc-item" data-target="#stats">📊 Statistiques</div>
            <div class="toc-item" data-target="#search">🔍 Recherche</div>
            <div class="toc-item" data-target="#blog-posts">📚 Articles</div>
            <div class="toc-item" data-target="#newsletter">📧 Newsletter</div>
          </div>
        </div>

        <!-- Mode lecture immersif (masqué par défaut) -->
        <div class="reading-mode hidden" id="reading-mode">
          <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between mb-8">
              <h1 class="text-3xl font-bold">Mode Lecture</h1>
              <button class="close-reading-mode text-2xl hover:text-primary" id="close-reading-mode">&times;</button>
            </div>
            <div class="prose prose-lg max-w-none">
              <!-- Contenu des articles sera injecté ici -->
            </div>
          </div>
        </div>

        <!-- CTA Section -->
        <div class="text-center mt-20">
          <div class="bg-gradient-to-br from-primary/10 to-primary/5 rounded-3xl p-12 border border-primary/10">
            <h3 class="text-3xl font-bold text-foreground mb-4">Besoin de conseils personnalisés ?</h3>
            <p class="text-muted mb-8 max-w-2xl mx-auto">
              Notre équipe d'experts vous accompagne dans tous vos projets immobiliers en Savoie.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <ButtonUltra href="/estimation" text="Estimation gratuite" />
              <ButtonUltra href="/contact" text="Nous contacter" variant="secondary" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="reading-progress">
      <div class="reading-progress-bar"></div>
    </div>
  </section>

  <!-- Newsletter Section Ultra-Moderne -->
  <section class="py-24 bg-gradient-to-br from-primary to-primary/90 text-white relative overflow-hidden" id="newsletter">
    <!-- Motifs géométriques -->
    <div class="absolute inset-0 opacity-8">
      <div class="absolute top-10 right-10 w-32 h-32 bg-white/20 rounded-full blur-xl"></div>
      <div class="absolute bottom-10 left-10 w-24 h-24 border-2 border-white/30 rotate-45"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-4xl md:text-5xl font-light mb-6 tracking-tight">
          Restez informé des dernières<br>
          <span class="bg-gradient-to-r from-white/90 to-white/70 bg-clip-text text-transparent font-semibold">tendances immobilières</span>
        </h2>

        <p class="text-xl text-white/90 mb-12 max-w-2xl mx-auto">
          Recevez nos analyses du marché et conseils d'experts directement dans votre boîte mail.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto">
          <input
            type="email"
            placeholder="Votre email"
            class="flex-1 px-6 py-4 bg-white/90 backdrop-blur-sm border border-white/30 text-primary rounded-2xl focus:outline-none focus:ring-2 focus:ring-white/50 placeholder:text-primary/60"
          >
          <ButtonUltra text="S'abonner" class="bg-white text-primary hover:bg-white/90" />
        </div>

        <p class="text-white/80 text-sm mt-6">
          Aucun spam • Désabonnement en un clic
        </p>
      </div>
    </div>
  </section>
</Base>

<script>
  // Gestion de l'indicateur de scroll
  const scrollIndicator = document.querySelector('.scroll-indicator');
  if (scrollIndicator) {
    scrollIndicator.addEventListener('click', () => {
      const blogSection = document.querySelector('#blog-posts');
      if (blogSection) {
        blogSection.scrollIntoView();
      }
    });
  }

  // Toggle thème sombre/clair
  const themeToggle = document.getElementById('theme-toggle');
  const sunIcon = document.querySelector('.sun-icon');
  const moonIcon = document.querySelector('.moon-icon');

  if (themeToggle) {
    // Vérifier le thème sauvegardé
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.classList.toggle('dark', savedTheme === 'dark');

    if (savedTheme === 'dark') {
      sunIcon?.classList.add('hidden');
      moonIcon?.classList.remove('hidden');
    }

    themeToggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');

      if (isDark) {
        sunIcon?.classList.add('hidden');
        moonIcon?.classList.remove('hidden');
      } else {
        sunIcon?.classList.remove('hidden');
        moonIcon?.classList.add('hidden');
      }
    });
  }

  // Barre de progression de lecture
  const readingProgress = document.querySelector('.reading-progress-bar') as HTMLElement;
  if (readingProgress) {
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset;
      const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = (scrollTop / documentHeight) * 100;
      readingProgress.style.width = `${Math.min(scrollPercent, 100)}%`;
    });
  }

  // Table des matières flottante
  const tocBtn = document.getElementById('toc-btn');
  const floatingToc = document.getElementById('floating-toc');
  const tocItems = document.querySelectorAll('.toc-item');

  if (tocBtn && floatingToc) {
    tocBtn.addEventListener('click', () => {
      floatingToc.classList.toggle('visible');
    });

    // Fermer la TOC en cliquant dehors
    document.addEventListener('click', (e) => {
      if (!floatingToc.contains(e.target as Node) && !tocBtn.contains(e.target as Node)) {
        floatingToc.classList.remove('visible');
      }
    });

    // Navigation dans la TOC
    tocItems.forEach(item => {
      item.addEventListener('click', () => {
        const targetId = item.getAttribute('data-target');
        if (targetId !== null) {
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            targetElement.scrollIntoView();
            floatingToc.classList.remove('visible');

            // Mettre à jour l'état actif
            tocItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
          }
        }
      });
    });
  }

  // Mode lecture immersif
  const readingModeBtn = document.getElementById('reading-mode-btn');
  const readingMode = document.getElementById('reading-mode');
  const closeReadingMode = document.getElementById('close-reading-mode');

  if (readingModeBtn && readingMode && closeReadingMode) {
    readingModeBtn.addEventListener('click', () => {
      // Récupérer le contenu de la page actuelle
      const mainContent = document.querySelector('main') || document.querySelector('.container');
      if (mainContent && readingMode.querySelector('.prose')) {
        readingMode.querySelector('.prose')!.innerHTML = mainContent.innerHTML;
        readingMode.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }
    });

    closeReadingMode.addEventListener('click', () => {
      readingMode.classList.add('hidden');
      document.body.style.overflow = 'auto';
    });
  }

  // Bouton partager
  const shareBtn = document.getElementById('share-btn');
  if (shareBtn) {
    shareBtn.addEventListener('click', async () => {
      if (navigator.share) {
        try {
          await navigator.share({
            title: document.title,
            text: 'Découvrez cet article intéressant sur l\'immobilier à Voglans',
            url: window.location.href
          });
        } catch (err) {
          console.log('Erreur de partage:', err);
        }
      } else {
        // Fallback pour les navigateurs qui ne supportent pas l'API Share
        navigator.clipboard.writeText(window.location.href).then(() => {
          // Afficher une notification temporaire
          const notification = document.createElement('div');
          notification.className = 'fixed top-4 right-4 bg-primary text-white px-4 py-2 rounded-lg shadow-lg z-50';
          notification.textContent = 'Lien copié dans le presse-papiers !';
          document.body.appendChild(notification);

          setTimeout(() => {
            document.body.removeChild(notification);
          }, 3000);
        });
      }
    });
  }
</script>
